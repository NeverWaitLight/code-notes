# Goals and Background Context

## Goals

- 提供本地可运行的在线视频网站演示，覆盖上传、分片、在线播放核心流程
- 验证 Java 后端（OpenJDK 21 + Spring Boot + JPA + SQLite + JavaCV）的视频处理与存储能力
- 验证 Vue 3 + hls.js 前端播放与基础交互
- 全流程不依赖第三方服务，基于本地文件系统与 SQLite 数据库

## Background Context

该项目是一个可独立运行的在线视频网站演示，重点验证从视频上传到分片处理、再到在线播放的端到端链路。技术栈明确限定为 Java 后端与 Vue 3 前端，以便聚焦于可执行的最小可行功能，而不是完整产品化能力。

在架构上强调本地化与离线可运行，视频文件和数据库均落地到本地文件系统与 SQLite，避免引入对象存储、转码服务或云媒体平台等外部依赖，确保演示环境可复制、易搭建。

## Problem Statement

需要一个本地可运行、可复制的在线视频网站 Demo，用于验证“上传 → 分片 → 播放”的端到端流程与技术栈可行性。现有现成方案往往依赖云服务或复杂部署，无法满足离线环境下快速演示与验证的需求。

## Target Users

- 需要演示视频处理与播放流程的开发者/评审者
- 需要快速验证技术方案的产品或项目成员
- 学习视频上传与 HLS 播放流程的技术学习者

## Success Metrics

- 在无外部服务条件下，本机可完成至少 1 个视频的上传、分片、播放与删除全流程
- 支持 H.264 MP4 且 ≤ 5GB 的上传在本机环境稳定成功（以至少 2 个测试样例验证）
- `startup.sh` 可一键启动前后端，首页可正常访问并显示视频列表

## Out of Scope

- 用户注册、登录、权限控制与鉴权
- 评论、点赞、收藏、推荐与搜索
- 多端同步、云端存储或第三方对象存储
- 视频编辑、转码多规格输出或字幕生成
- CDN 或直播能力

## MVP Validation Approach

- 使用至少 2 个 H.264 MP4 测试文件完成上传与播放验证
- 在上传页观察进度与状态变化，完成后列表可见
- 播放页使用 hls.js 成功播放并可执行删除操作
- 记录从上传到“上传完成”的耗时并验证状态更新

## Data and Operations

- 数据存储：视频原始文件与 HLS 产物存储在本地文件系统，元数据存储在 SQLite
- 数据保留：默认永久保留，除非用户在播放页执行删除
- 清理策略：删除操作需同时清理原始文件、HLS 目录与数据库记录
- 备份/恢复：本 Demo 不提供自动备份与恢复机制
- 运维范围：不提供监控、告警与日志采集平台，仅输出应用日志到本地

## Change Log

| Date       | Version | Description                             | Author |
| ---------- | ------- | --------------------------------------- | ------ |
| 2026-01-14 | v0.1    | 根据用户输入创建初始 PRD 框架与背景目标 | John   |
| 2026-01-14 | v0.3    | 根据反馈细化 Requirements 细节          | John   |
| 2026-01-14 | v0.4    | 更新技术假设（目录结构与启动脚本）      | John   |
| 2026-01-14 | v0.5    | 补充问题陈述、目标用户与成功指标        | John   |
| 2026-01-14 | v0.6    | 补充范围边界与 MVP 验证方式             | John   |
| 2026-01-14 | v0.7    | 补充数据与运维要求                      | John   |
| 2026-01-14 | v0.8    | 补充性能期望与错误提示规范              | John   |
