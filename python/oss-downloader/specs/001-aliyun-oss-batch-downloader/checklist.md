# 验收 Checklist: 交互式 OSS 批量下载工具

**Purpose**: 覆盖核心功能、可靠性、错误处理与交付物的验收项
**Created**: 2026-01-28
**Feature**: specs/001-aliyun-oss-batch-downloader/spec.md

**Note**: This checklist is generated by the `/speckit.checklist` command based on feature context and requirements.

## 功能与流程

- [ ] CHK001 CLI 交互式流程收集 Endpoint/AccessKeyId/AccessKeySecret/bucket/prefix/目标目录/并发数/后缀过滤/预览选项
- [ ] CHK002 使用 oss2 按 prefix 分页列举对象并生成待下载清单
- [ ] CHK003 预览模式仅输出对象数量/总大小统计且不写入本地文件
- [ ] CHK004 下载后本地目录结构与 OSS key 的相对路径一致

## 并发与进度

- [ ] CHK005 并发下载数量可配置且有默认值
- [ ] CHK006 下载过程中显示进度、速度、已完成数量且不阻塞下载

## 断点续传与重试

- [ ] CHK007 manifest 持久化记录对象状态并在重跑时跳过已完成对象
- [ ] CHK008 第一轮对每个对象仅尝试 1 次且不因单个失败提前终止
- [ ] CHK009 第二轮仅对失败对象重试，总尝试次数（含首轮）≤ 3
- [ ] CHK010 可重试错误使用指数退避策略
- [ ] CHK011 为每个对象记录 retry_count 与 last_error

## 错误处理与退出码

- [ ] CHK012 prefix 下无对象时提示“无对象”并以退出码 0 结束
- [ ] CHK013 不可恢复错误输出到 stderr 且退出码非 0
- [ ] CHK014 权限/鉴权错误提示包含 bucket/prefix 并返回非 0
- [ ] CHK015 目标目录不可写或磁盘不足时有明确错误提示

## 输出产物

- [ ] CHK016 失败对象列表 CSV 输出到 `<target_dir>/.oss-failed.csv`，包含 key/last_error/retry_count
- [ ] CHK017 下载完成汇总包含总数、成功数、失败数、耗时

## 性能与规模

- [ ] CHK018 10,000 对象规模下预览统计 ≤ 60 秒完成
- [ ] CHK019 10,000 小文件下载后失败率 ≤ 1%（重试后）

## 交付与文档

- [ ] CHK020 使用 PyInstaller 生成独立可执行文件，目标平台可直接运行
- [ ] CHK021 quickstart/README 与实际 CLI 参数和流程一致

## 边界条件

- [ ] CHK022 prefix 为空/根路径时有明确确认或防误操作机制
- [ ] CHK023 key 含中文或特殊字符时路径映射与下载正确
- [ ] CHK024 单个大文件下载中断后的恢复策略有明确说明与行为

## Notes

- Check items off as completed: `[x]`
- Add comments or findings inline
- Link to relevant resources or documentation
- Items are numbered sequentially for easy reference